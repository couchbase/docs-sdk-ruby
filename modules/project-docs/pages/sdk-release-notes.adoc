= SDK Release Notes
:description: Release notes, installation instructions, and download archive for the Couchbase Ruby Client.
:page-topic-type: project-doc
:navtitle: Release Notes
:page-partial:
:page-toclevels: 2
:page-aliases: ROOT:relnotes-ruby-sdk,ROOT:release-notes,ROOT:sdk-release-notes


// tag::all[]
[abstract]
{description}

This page covers installation of the 3.x versions of the Couchbase Ruby SDK, and release notes for all 3.x versions.


== SDK Installation

Ruby SDK supports MRI Ruby versions 3.1, 3.2, and 3.3.
The source package is available through https://rubygems.org/gems/couchbase and can be installed with:

[source,console]
----
gem install couchbase
----

Note that `--pre` is necessary when the SDK in Beta/Preview phase -- `gem install --pre couchbase` -- otherwise the
latest stable release will be installed.

In addition to rubygems.org, we also maintain official gem repositories, where we publish not only source version of the
package, but also precompiled binaries for Linux and MacOS.

To use official repository, it have to be registered in the `.gemrc` file:

[source,bash]
----
gem sources --add https://packages.couchbase.com/clients/ruby/
----

The repository could be also specified in `Gemfile` for bundler. And in this case the source would be applied only for
Couchbase SDK library:

[source,ruby,subs="+attributes"]
----
gem "couchbase", "{sdk_current_version}", :source => "https://packages.couchbase.com/clients/ruby/"
----

Or run in terminal:

[source,bash]
----
gem install couchbase --clear-sources --source https://packages.couchbase.com/clients/ruby/
----

And finally, it is possible to download the package and install from the file. In the notes below, we specify tables
with links to every release package along with precompiled binaries.

[source,bash,subs="+attributes"]
----
wget https://packages.couchbase.com/clients/ruby/sdk-{sdk_current_version}/couchbase-{sdk_current_version}-x86_64-linux.gem
gem install couchbase-{sdk_current_version}-x86_64-linux.gem
----

The URL structure is:

[source,shell,subs="+attributes"]
----
https://packages.couchbase.com/clients/ruby/sdk-{sdk_current_version}/couchbase-{sdk_current_version}-%{platform}.gem
----

where "platform" placeholder can take values: `arm64-darwin`, `x86_64-darwin`, `x86_64-linux`,
`x86_64-linux-musl`. To see platform string the following command:

[source,bash]
----
ruby -rrbconfig -e 'puts RbConfig::CONFIG["platform"]'
----

[#latest-release]
== Ruby SDK 3.5 Releases

We always recommend using the latest version of the SDK -- it contains all of the latest security patches and support for new and upcoming features.
All patch releases for each dot minor release should be API compatible, and safe to upgrade;
any changes to expected behavior are noted in the release notes that follow.

=== Version 3.5.4 (27 August 2024)

[source,bash]
----
gem install couchbase -v 3.5.4
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.5.4/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.5.3...3.5.4++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.5.4[Rubygems]

==== Download Links

[cols="9,19"]
|===
| Platform            | File
| Checksums           | https://packages.couchbase.com/clients/ruby/sdk-3.5.4/couchbase-3.5.4.sha256sum[couchbase-3.5.4.sha256sum]
| Source Archive      | https://packages.couchbase.com/clients/ruby/sdk-3.5.4/couchbase-3.5.4.gem[couchbase-3.5.4.gem]
| Linux x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.4/couchbase-3.5.4-x86_64-linux.gem[couchbase-3.5.4-x86_64-linux.gem]
| Linux x86_64 (musl) | https://packages.couchbase.com/clients/ruby/sdk-3.5.4/couchbase-3.5.4-x86_64-linux-musl.gem[couchbase-3.5.4-x86_64-linux-musl.gem]
| macOS x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.4/couchbase-3.5.4-x86_64-darwin.gem[couchbase-3.5.4-x86_64-darwin-20.gem]
| macOS arm64         | https://packages.couchbase.com/clients/ruby/sdk-3.5.4/couchbase-3.5.4-arm64-darwin.gem[couchbase-3.5.4-arm64-darwin.gem]
|===

==== Fixes

* Updated core to 1.0.3
(https://github.com/couchbase/couchbase-ruby-client/pull/161[#161]).
Release notes: xref:cxx-sdk:project-docs:sdk-release-notes.adoc#version-1-0-3-22-october-2024[C++ SDK 1.0.3].

* Add CI scripts for Rocky Linux
(https://github.com/couchbase/couchbase-ruby-client/pull/159[#159]).

=== Version 3.5.3 (27 August 2024)

[source,bash]
----
gem install couchbase -v 3.5.3
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.5.3/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.5.2...3.5.3++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.5.3[Rubygems]

==== Download Links

[cols="9,19"]
|===
| Platform            | File
| Checksums           | https://packages.couchbase.com/clients/ruby/sdk-3.5.3/couchbase-3.5.3.sha256sum[couchbase-3.5.3.sha256sum]
| Source Archive      | https://packages.couchbase.com/clients/ruby/sdk-3.5.3/couchbase-3.5.3.gem[couchbase-3.5.3.gem]
| Linux x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.3/couchbase-3.5.3-x86_64-linux.gem[couchbase-3.5.3-x86_64-linux.gem]
| Linux x86_64 (musl) | https://packages.couchbase.com/clients/ruby/sdk-3.5.3/couchbase-3.5.3-x86_64-linux-musl.gem[couchbase-3.5.3-x86_64-linux-musl.gem]
| macOS x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.3/couchbase-3.5.3-x86_64-darwin.gem[couchbase-3.5.3-x86_64-darwin-20.gem]
| macOS arm64         | https://packages.couchbase.com/clients/ruby/sdk-3.5.3/couchbase-3.5.3-arm64-darwin.gem[couchbase-3.5.3-arm64-darwin.gem]
|===

==== Fixes

* https://issues.couchbase.com/browse/RCBC-496[RCBC-496]:
Removed `googletest` from release package
(https://github.com/couchbase/couchbase-ruby-client/pull/154[#154]).

* Updated core to 1.0.1
(https://github.com/couchbase/couchbase-ruby-client/pull/157[#157]).
Release notes: xref:cxx-sdk:project-docs:sdk-release-notes.adoc#version-1-0-1-22-august-2024[C++ SDK 1.0.1].


=== Version 3.5.2 (25 July 2024)

[source,bash]
----
gem install couchbase -v 3.5.2
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.5.2/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.5.1...3.5.2++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.5.2[Rubygems]

==== Download Links

[cols="9,19"]
|===
| Platform            | File
| Checksums           | https://packages.couchbase.com/clients/ruby/sdk-3.5.2/couchbase-3.5.2.sha256sum[couchbase-3.5.2.sha256sum]
| Source Archive      | https://packages.couchbase.com/clients/ruby/sdk-3.5.2/couchbase-3.5.2.gem[couchbase-3.5.2.gem]
| Linux x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.2/couchbase-3.5.2-x86_64-linux.gem[couchbase-3.5.2-x86_64-linux.gem]
| Linux x86_64 (musl) | https://packages.couchbase.com/clients/ruby/sdk-3.5.2/couchbase-3.5.2-x86_64-linux-musl.gem[couchbase-3.5.2-x86_64-linux-musl.gem]
| macOS               | https://packages.couchbase.com/clients/ruby/sdk-3.5.2/couchbase-3.5.2-x86_64-darwin-20.gem[couchbase-3.5.2-x86_64-darwin-20.gem]
|===

==== Improvements

* https://issues.couchbase.com/browse/RCBC-489[RCBC-489]:
Support added for base64 encoded vector types (https://github.com/couchbase/couchbase-ruby-client/pull/146[#146]).

==== Fixes

* https://issues.couchbase.com/browse/RCBC-490[RCBC-490],
https://issues.couchbase.com/browse/RCBC-492[RCBC-492]:
Raise `Error::InvalidArgument` for invalid search queries
(https://github.com/couchbase/couchbase-ruby-client/pull/145[#145],
https://github.com/couchbase/couchbase-ruby-client/pull/147[#147],
https://github.com/couchbase/couchbase-ruby-client/pull/148[#148]).

* Updated core to 1.0.0
(https://github.com/couchbase/couchbase-ruby-client/pull/152[#152]).
Release notes:
https://docs.couchbase.com/cxx-sdk/current/project-docs/sdk-release-notes.html#version-1-0-0-26-june-2024[C++ SDK 1.0.0].


=== Version 3.5.1 (23 April 2024)

[source,bash]
----
gem install couchbase -v 3.5.1
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.5.1/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.5.0...3.5.1++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.5.1[Rubygems]

==== Download Links

[cols="9,19"]
|===
| Platform            | File
| Checksums           | https://packages.couchbase.com/clients/ruby/sdk-3.5.1/couchbase-3.5.1.sha256sum[couchbase-3.5.1.sha256sum]
| Source Archive      | https://packages.couchbase.com/clients/ruby/sdk-3.5.1/couchbase-3.5.1.gem[couchbase-3.5.1.gem]
| Linux x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.1/couchbase-3.5.1-x86_64-linux.gem[couchbase-3.5.1-x86_64-linux.gem]
| Linux x86_64 (musl) | https://packages.couchbase.com/clients/ruby/sdk-3.5.1/couchbase-3.5.1-x86_64-linux-musl.gem[couchbase-3.5.1-x86_64-linux-musl.gem]
| macOS 11 x84_64     | https://packages.couchbase.com/clients/ruby/sdk-3.5.1/couchbase-3.5.1-x86_64-darwin.gem[couchbase-3.5.1-x86_64-darwin.gem]
| macOS 13 arm64      | https://packages.couchbase.com/clients/ruby/sdk-3.5.1/couchbase-3.5.1-arm64-darwin.gem[couchbase-3.5.1-arm64-darwin.gem]
|===

====  Improvements

* https://issues.couchbase.com/browse/RCBC-482[RCBC-482]:
Only expand MutateIn macros when the relevant symbols are used as values (#141).

==== Bug Fixes

* https://issues.couchbase.com/browse/RCBC-476[RCBC-476]:
`FeatureNotAvailable` message for `couhbase2://` `ping` and `diagnostics` (#139).

==== Underlying C++ SDK Core Changes

===== Enhancements

* https://issues.couchbase.com/browse/CXXCBC-489[CXXCBC-489]:
Added support for scoped eventing functions (https://github.com/couchbaselabs/couchbase-cxx-client/pull/548[#548], https://github.com/couchbaselabs/couchbase-cxx-client/pull/554[#554]).
* https://issues.couchbase.com/browse/CXXCBC-470[CXXCBC-470]:
Distinguish between 'unset' and 'off' `query_profile` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/551[#551]).

===== Fixes

* https://issues.couchbase.com/browse/CXXCBC-487[CXXCBC-487]:
Added logic during bootstrap to check if alternate addressing is being used (https://github.com/couchbaselabs/couchbase-cxx-client/pull/545[#545]).
* https://issues.couchbase.com/browse/CXXCBC-503[CXXCBC-503]:
Added logic to ignore configuration if it contains an empty vBucket map (https://github.com/couchbaselabs/couchbase-cxx-client/pull/556[#556], https://github.com/couchbaselabs/couchbase-cxx-client/pull/558[#558]).
* https://issues.couchbase.com/browse/CXXCBC-30[CXXCBC-30]:
Fixed inconsistent behaviour when using subdoc opcodes incorrectly (https://github.com/couchbaselabs/couchbase-cxx-client/pull/559[#559]).
* https://issues.couchbase.com/browse/CXXCBC-492[CXXCBC-492]:
Updated collection_component get_collection_id to use retry strategy (https://github.com/couchbaselabs/couchbase-cxx-client/pull/552[#552]).
* https://issues.couchbase.com/browse/CXXCBC-494[CXXCBC-494]:
Fixed memory issue in range scan implementation (https://github.com/couchbaselabs/couchbase-cxx-client/pull/549[#549]).
* Always attempt to extract common query code if error has not been set (https://github.com/couchbaselabs/couchbase-cxx-client/pull/561[#561]). This fixes quota/rate limit checks for older servers.

===== Build and Tests Fixes

* https://issues.couchbase.com/browse/CXXCBC-502[CXXCBC-502]:
Apply `/bigobj` for SDK objects only (https://github.com/couchbaselabs/couchbase-cxx-client/pull/550[#550]). Avoid using global `add_definitions()` as it might leak to non-{cpp} languages (like `ASM_NASM` on Windows).


=== Version 3.5.0 (17 March 2024)

[source,bash]
----
gem install couchbase -v 3.5.0
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.5.0/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.4.5...3.5.0++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.5.0[Rubygems]


==== Known Issues

* https://issues.couchbase.com/browse/CXXCBC-447[CXXCBC-447]:
This version of the SDK will not be able to connect to a cluster utilizing alternate addressing.
The recommendation is to wait to upgrade to a version of the {name-sdk} that contains {cpp} SDK 1.0.0-dp.15 (or later).

==== Improvements

* https://issues.couchbase.com/browse/RCBC-469[RCBC-469]:
Support added for Scoped Search Indexes (https://github.com/couchbase/couchbase-ruby-client/pull/132[#132]).
* https://issues.couchbase.com/browse/RCBC-467[RCBC-467]:
Added support for Vector search (https://github.com/couchbase/couchbase-ruby-client/pull/131[#131]).
* https://issues.couchbase.com/browse/RCBC-468[RCBC-468]:
Support added for `maxTTL` value of -1 for collection 'no expiry' (https://github.com/couchbase/couchbase-ruby-client/pull/130[#130]).
* https://issues.couchbase.com/browse/RCBC-410[RCBC-410], https://issues.couchbase.com/browse/RCBC-458[RCBC-458]:
Added support for the `couchbase2` protocol
(https://github.com/couchbase/couchbase-ruby-client/pull/126[#126], https://github.com/couchbase/couchbase-ruby-client/pull/127[#127]).
* https://issues.couchbase.com/browse/RCBC-472[RCBC-472]:
Ping now returns result for management service when specified in options (https://github.com/couchbase/couchbase-ruby-client/pull/134[#134]).
* https://issues.couchbase.com/browse/RCBC-463[RCBC-463]:
Adedd `DocumentNotLocked` error to corresponds with the {cpp} error code `couchbase::errc::key_value::document_not_locked`
(https://github.com/couchbase/couchbase-ruby-client/pull/128[#128]).

==== Bug Fixes

* Ensure that truncating keys in CouchbaseStore preserves the validity of their encoding (https://github.com/couchbase/couchbase-ruby-client/pull/125[#125]).
* https://issues.couchbase.com/browse/RCBC-461[RCBC-461]:
`extract_expiry_time` is now called in the setter instead of the constructor, so that the expiry is sent to the backend in the correct format, and there should no longer be an `ArgumentError`
(https://github.com/couchbase/couchbase-ruby-client/pull/124[#124]).

==== Build and Test Improvements

* https://issues.couchbase.com/browse/RCBC-464[RCBC-464]:
Improved stability of management tests (https://github.com/couchbase/couchbase-ruby-client/pull/133[#133]).
* Migrated most of the build and test tasks to GitHub Actions.

==== Underlying C++ SDK Core Changes

===== Changes in Couchbase C++ SDK 1.0.0-dp.14

.Fixes

* https://issues.couchbase.com/browse/CXXCBC-482[CXXCBC-482]:
Updated range scan orchestrator to use best effort retry strategy by default (https://github.com/couchbaselabs/couchbase-cxx-client/pull/542[#542]).
* https://issues.couchbase.com/browse/CXXCBC-481[CXXCBC-481]:
Fixed potential crash when parsing search result hits (https://github.com/couchbaselabs/couchbase-cxx-client/pull/541[#541]).
* https://issues.couchbase.com/browse/CXXCBC-461[CXXCBC-461]:
Updated ping operation to not send to nodes that have not completed bootstrap (https://github.com/couchbaselabs/couchbase-cxx-client/pull/540[#540]).
* https://issues.couchbase.com/browse/CXXCBC-462[CXXCBC-462]:
Fixed hanging when specifying a custom metadata collection via the public API & expose errors (https://github.com/couchbaselabs/couchbase-cxx-client/pull/532[#532]).
* https://issues.couchbase.com/browse/CXXCBC-480[CXXCBC-480]:
Fixed capabilities check for replica LookupIn operations (https://github.com/couchbaselabs/couchbase-cxx-client/pull/539[#539]).
* https://issues.couchbase.com/browse/CXXCBC-479[CXXCBC-479]:
Fixed capabilities check for replica `LookupIn` operations (https://github.com/couchbaselabs/couchbase-cxx-client/pull/537[#537]).
* https://issues.couchbase.com/browse/CXXCBC-336[CXXCBC-336]:
Updated DNS config to not fallback to 8.8.8.8 if SDK cannot obtain system DNS server (https://github.com/couchbaselabs/couchbase-cxx-client/pull/533[#533]).

===== Changes in Couchbase C++ SDK 1.0.0-dp.13

New features and enhancements

* https://issues.couchbase.com/browse/CXXCBC-456[CXXCBC-456]:
Updated configuration logic when 0x0d (`EConfigOnly`) status code is received to have the SDK request new configuration and send current operation to retry orchestrator (https://github.com/couchbaselabs/couchbase-cxx-client/pull/523[#523]).
* https://issues.couchbase.com/browse/CXXCBC-191[CXXCBC-191]:
Index Key Encoding (https://github.com/couchbaselabs/couchbase-cxx-client/pull/519[#519]) --
in line with the https://github.com/couchbaselabs/sdk-rfcs/blob/master/rfc/0054-sdk3-management-apis.md[rfc],
the `fields` paramaeter is now remamed to keys in the Public API's `create_index()`,
and each index key provided to `create_index()` is encoded by surrounding them with backticks.

.Fixes

* https://issues.couchbase.com/browse/CXXCBC-345[CXXCBC-345]:
Added range scan improvements and resolved concurrency issues (https://github.com/couchbaselabs/couchbase-cxx-client/pull/525[#525]).
* https://issues.couchbase.com/browse/CXXCBC-284[CXXCBC-284]:
Updated config polling to not use session that is not bootstrapped (https://github.com/couchbaselabs/couchbase-cxx-client/pull/528[#528]).
* https://issues.couchbase.com/browse/CXXCBC-447[CXXCBC-447]:
Updated bootstrap logic to use addresses from the config to bootstrap bucket (https://github.com/couchbaselabs/couchbase-cxx-client/pull/516[#516]).
* https://issues.couchbase.com/browse/CXXCBC-450[CXXCBC-450]:
Updated bootstrap logic to reset bootstrap handler before re-bootstrap (https://github.com/couchbaselabs/couchbase-cxx-client/pull/524[#524]).
** We do not want any actions from the old bootstrap handler once the session decided to re-bootstrap.
For example, bucket could not be selected, but we might still get configuration responses before socket reset.
* https://issues.couchbase.com/browse/CXXCBC-452[CXXCBC-452]:
Updated capabilities and fail fast when selected feature is not available
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/522[#522], https://github.com/couchbaselabs/couchbase-cxx-client/pull/513[#513]).
* https://issues.couchbase.com/browse/CXXCBC-431[CXXCBC-431]:
Added check for history retention bucket capability in collection create/update (https://github.com/couchbaselabs/couchbase-cxx-client/pull/502[#502], https://github.com/couchbaselabs/couchbase-cxx-client/pull/505[#505]).
* https://issues.couchbase.com/browse/CXXCBC-421[CXXCBC-421]:
Updated query operation to return `feature_not_available` if query preserve expiry is specified but is not supported on the server(https://github.com/couchbaselabs/couchbase-cxx-client/pull/510[#510]).

===== Changes in Couchbase C++ SDK 1.0.0-dp.12

.New features and enhancements

* https://issues.couchbase.com/browse/CXXCBC-401[CXXCBC-401]:
Added ping & diagnostics to public API
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/498[#498], https://github.com/couchbaselabs/couchbase-cxx-client/pull/503[#503]).
* https://issues.couchbase.com/browse/CXXCBC-346[CXXCBC-346]:
Support added for `maxTTL` value of -1 for collection 'no expiry' (https://github.com/couchbaselabs/couchbase-cxx-client/pull/500[#500]).
* https://issues.couchbase.com/browse/CXXCBC-442[CXXCBC-442]:
Transcoder support - which was previously limited in the SDK to `JSON` and `RawBinary` transcoders --
has now been extended to `raw_json` and `raw_string` transcoders (https://github.com/couchbaselabs/couchbase-cxx-client/pull/514[#514]).
* https://issues.couchbase.com/browse/CXXCBC-440[CXXCBC-440]:
Support added for Scoped Search Indexes
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/512[#512], https://github.com/couchbaselabs/couchbase-cxx-client/pull/513[#513]).

.Fixes

* https://issues.couchbase.com/browse/CXXCBC-284[CXXCBC-284]:
Updated config polling to not use session that is not bootstrapped, to reduce network traffic when polling for cluster configuration
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/504[#504], https://github.com/couchbaselabs/couchbase-cxx-client/pull/528[#528]).
* https://issues.couchbase.com/browse/CXXCBC-422[CXXCBC-422]:
Added insufficient credentials error code to common query error code conversion (https://github.com/couchbaselabs/couchbase-cxx-client/pull/511[#511]).
* https://issues.couchbase.com/browse/CXXCBC-421[CXXCBC-421]:
Updated query operation to return `feature_not_available` if query preserve expiry is specified but is not supported on the server(https://github.com/couchbaselabs/couchbase-cxx-client/pull/510[#510]).
* https://issues.couchbase.com/browse/CXXCBC-426[CXXCBC-426]:
Under testing, a get with very large projection was returning fields outside of the projection.
This has been fixed, with the projections now set correctly, and the SDK should fall back to a full-doc fetch and return a valid projected result
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/499[#499]).

===== Changes in Couchbase C++ SDK 1.0.0-dp.11

.Fixes

* https://issues.couchbase.com/browse/CXXCBC-404[CXXCBC-404]:
Fixed `unlock` operations to expose `KV_LOCKED` status as `cas_mismatch` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/479[#479]).
* https://issues.couchbase.com/browse/CXXCBC-403[CXXCBC-403]:
Updated `not_my_vbucket` KV response to allow retries (https://github.com/couchbaselabs/couchbase-cxx-client/pull/480[#480]).
* https://issues.couchbase.com/browse/CXXCBC-368[CXXCBC-368]:
Added support for subscribing to clustermap notifications to speed up failover (https://github.com/couchbaselabs/couchbase-cxx-client/pull/490[#490]).
* https://issues.couchbase.com/browse/CXXCBC-419[CXXCBC-419]:
Updated MCBP protocol parser to start with clean state.
Fixes protocol parsing issues when bootstrap sequence is being retried (https://github.com/couchbaselabs/couchbase-cxx-client/pull/496[#496]).
* https://issues.couchbase.com/browse/CXXCBC-409[CXXCBC-409]:
Added handling for `index does not exist` query error (https://github.com/couchbaselabs/couchbase-cxx-client/pull/492[#492]).
* https://issues.couchbase.com/browse/CXXCBC-412[CXXCBC-412]:
Added support for the `document_not_locked` (0x0e) KV status, mapping it to the `errc::key_value::document_not_locked` error code
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/491[#491]).

===== Changes in Couchbase C++ SDK 1.0.0-dp.10

.Fixes

* https://issues.couchbase.com/browse/CXXCBC-383[CXXCBC-383]:
The `subdoc_doc_too_deep` (0xc4) KV status now returns a`path_too_deep` error code (https://github.com/couchbaselabs/couchbase-cxx-client/pull/455[#455]).
* https://issues.couchbase.com/browse/CXXCBC-382[CXXCBC-382]:
Fixed `raw_binary_transcoder` so that `get`s on binary data are now possible.. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/459[#459]).
* https://issues.couchbase.com/browse/CXXCBC-387[CXXCBC-387]:
Optimising tags for `noop_tracer` and cache formatted `mbcp_session` endpoints
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/461[#461], https://github.com/couchbaselabs/couchbase-cxx-client/pull/462[#462], https://github.com/couchbaselabs/couchbase-cxx-client/pull/464[#464])..
* Added more information to diagnose timeouts on NMV responses (https://github.com/couchbaselabs/couchbase-cxx-client/pull/475[#475]).


==== Download Links

[cols="9,19"]
|===
| Platform            | File
| Checksums           | https://packages.couchbase.com/clients/ruby/sdk-3.5.0/couchbase-3.5.0.sha256sum[couchbase-3.5.0.sha256sum]
| Source Archive      | https://packages.couchbase.com/clients/ruby/sdk-3.5.0/couchbase-3.5.0.gem[couchbase-3.5.0.gem]
| Linux x86_64        | https://packages.couchbase.com/clients/ruby/sdk-3.5.0/couchbase-3.5.0-x86_64-linux.gem[couchbase-3.5.0-x86_64-linux.gem]
| Linux x86_64 (musl) | https://packages.couchbase.com/clients/ruby/sdk-3.5.0/couchbase-3.5.0-x86_64-linux-musl.gem[couchbase-3.5.0-x86_64-linux-musl.gem]
| macOS 11 x84_64     | https://packages.couchbase.com/clients/ruby/sdk-3.5.0/couchbase-3.5.0-x86_64-darwin-20.gem[couchbase-3.5.0-x86_64-darwin-20.gem]
| macOS 13 arm64      | https://packages.couchbase.com/clients/ruby/sdk-3.5.0/couchbase-3.5.0-arm64-darwin-22.gem[couchbase-3.5.0-arm64-darwin-22.gem]
|===



== Ruby SDK 3.4 Releases

=== Version 3.4.5 (10 October 2023)

[source,bash]
----
gem install couchbase -v 3.4.5
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.4.5/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.4.4...3.4.5++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.4.5[Rubygems]

==== Improvements

* https://issues.couchbase.com/browse/RCBC-450[RCBC-450]:
Subdoc exists was returning `nil` for content.
It should now return the value of the  content: true if result is success, or false if path-not-found
(http://github.com/couchbase/couchbase-ruby-client/pull/120[#120]).
* https://issues.couchbase.com/browse/RCBC-453[RCBC-453]:
Added support history retention in collection and bucket management
(http://github.com/couchbase/couchbase-ruby-client/pull/119[#119]).

==== Underlying C++ SDK Core Changes

* https://issues.couchbase.com/browse/CXXCBC-376[CXXCBC-376]:
Changed what 'create' and 'update' bucket operations send to the server.
Unrequired `BucketSettings` fields are now set to optional, and are not sent unless the settings are explicitly specified.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/451[#451]).
* https://issues.couchbase.com/browse/CXXCBC-374[CXXCBC-374]:
The SDK should now return a 'bucket_exists' error when the bucket already exists during a 'create' operation.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/449[#449]).
* https://issues.couchbase.com/browse/CXXCBC-359[CXXCBC-359]:
Reduced the default timeout for idle HTTP connections to 1 second.
The previous default (4.5 seconds) was too close to the 5-second server-side timeout, and could lead to spurious request failures.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/448[#448]).
* https://issues.couchbase.com/browse/CXXCBC-367[CXXCBC-367],
https://issues.couchbase.com/browse/CXXCBC-370[CXXCBC-370]:
Added history retention settings to buckets/collection management
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/446[#446]).
* https://issues.couchbase.com/browse/CXXCBC-119[CXXCBC-119]:
Return booleans for subdocument 'exists' operation, instead of error code
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/444[#444],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/452[#452]).
* Detect `collection_not_found` error in `update_collection` response
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/450[#450]).

==== Download Links

[cols="9,5,19"]
|===
| Platform            | Ruby ABI | File
| Checksums           |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5.sha256sum[couchbase-3.4.5.sha256sum]
| Source Archive      |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5.gem[couchbase-3.4.5.gem]
| Linux x86_64        | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-linux-3.2.0.gem[couchbase-3.4.5-x86_64-linux-3.2.0.gem]
| Linux x86_64        | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-linux-3.1.0.gem[couchbase-3.4.5-x86_64-linux-3.1.0.gem]
| Linux x86_64        | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-linux-3.0.0.gem[couchbase-3.4.5-x86_64-linux-3.0.0.gem]
| Linux x86_64 (musl) | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-linux-musl-3.2.0.gem[couchbase-3.4.5-x86_64-linux-musl-3.2.0.gem]
| Linux x86_64 (musl) | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-linux-musl-3.1.0.gem[couchbase-3.4.5-x86_64-linux-musl-3.1.0.gem]
| macOS 10.15 x84_64  | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-darwin-19-3.2.0.gem[couchbase-3.4.5-x86_64-darwin-19-3.2.0.gem]
| macOS 10.15 x84_64  | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-darwin-19-3.0.0.gem[couchbase-3.4.5-x86_64-darwin-19-3.0.0.gem]
| macOS 11 x84_64     | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-darwin-20-3.2.0.gem[couchbase-3.4.5-x86_64-darwin-20-3.2.0.gem]
| macOS 11 x84_64     | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-darwin-20-3.1.0.gem[couchbase-3.4.5-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64     | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-x86_64-darwin-20-3.0.0.gem[couchbase-3.4.5-x86_64-darwin-20-3.0.0.gem]
| macOS 11 M1         | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.5/couchbase-3.4.5-arm64-darwin-20-3.0.0.gem[couchbase-3.4.5-arm64-darwin-20-3.0.0.gem]
|===


=== Version 3.4.4 (21 August 2023)

[source,bash]
----
gem install couchbase -v 3.4.4
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.4.4/index.html[API Reference] |
link:++https://github.com/couchbase/couchbase-ruby-client/compare/3.4.3...3.4.4++[Full Changelog] |
https://rubygems.org/gems/couchbase/versions/3.4.4[Rubygems]

==== Improvements

* https://issues.couchbase.com/browse/RCBC-441[RCBC-441] interpret Integer as milliseconds in duration context (http://github.com/couchbase/couchbase-ruby-client/pull/110[#110], http://github.com/couchbase/couchbase-ruby-client/pull/111[#111]).

* https://issues.couchbase.com/browse/RCBC-442[RCBC-442] Support query with Read from Replica (http://github.com/couchbase/couchbase-ruby-client/pull/112[#112]).

* https://issues.couchbase.com/browse/RCBC-391[RCBC-391] SDK Support for Native KV Range Scans (http://github.com/couchbase/couchbase-ruby-client/pull/113[#113], http://github.com/couchbase/couchbase-ruby-client/pull/117[#117]).

* https://issues.couchbase.com/browse/RCBC-443[RCBC-443] Support for Subdocument Read from Replica (http://github.com/couchbase/couchbase-ruby-client/pull/116[#116]).

* https://issues.couchbase.com/browse/RCBC-451[RCBC-451], https://issues.couchbase.com/browse/RCBC-452[RCBC-451]: Expose any specific `lookup_in` spec errors (http://github.com/couchbase/couchbase-ruby-client/pull/118[#118]).

==== Underlying C++ SDK Core Changes

* https://issues.couchbase.com/browse/CXXCBC-333[CXXCBC-333]:
Fixed parsing 'resolv.conf' on Linux (https://github.com/couchbaselabs/couchbase-cxx-client/pull/416[#416]).
** The library might not ignore trailing characters when reading nameserver address from the file.

* https://issues.couchbase.com/browse/CXXCBC-335[CXXCBC-335]:
Now logging connection options for visibility (https://github.com/couchbaselabs/couchbase-cxx-client/pull/417[#417]).

* https://issues.couchbase.com/browse/CXXCBC-343[CXXCBC-343]: Continue bootsrap if DNS-SRV resolution fails (https://github.com/couchbaselabs/couchbase-cxx-client/pull/422[#422]).

* https://issues.couchbase.com/browse/CXXCBC-242[CXXCBC-242]:
SDK Support for Native KV Range Scans (https://github.com/couchbaselabs/couchbase-cxx-client/pull/419[#419], https://github.com/couchbaselabs/couchbase-cxx-client/pull/423[#423],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/424[#424],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/426[#426],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/428[#428],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/431[#431],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/432[#432],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/433[#433],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/434[#434]).

* https://issues.couchbase.com/browse/CXXCBC-339[CXXCBC-339]: Disable older TLS protocols (https://github.com/couchbaselabs/couchbase-cxx-client/pull/418[#418]).

* https://issues.couchbase.com/browse/CXXCBC-346[CXXCBC-346]: Protocol communication can now be logged in a separate file (https://github.com/couchbaselabs/couchbase-cxx-client/pull/425[#425]).
+
[source,ruby]
----
Couchbase::Backend.enable_protocol_logger_to_save_network_traffic_to_file("/tmp/cb.log")
----

* https://issues.couchbase.com/browse/CXXCBC-350[CXXCBC-350]:
Collection ID was resolved on a per-request basis -- which could result in situations where results from a single scan can originate from more than one collection.
This could happen if a collection was dropped and then immediately recreated with the same name.
We now resolve collection ID before performing any scan operations (https://github.com/couchbaselabs/couchbase-cxx-client/pull/433[#433]).

==== Download Links

[cols="9,5,19"]
|===
| Platform            | Ruby ABI | File
| Checksums           |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4.sha256sum[couchbase-3.4.4.sha256sum]
| Source Archive      |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4.gem[couchbase-3.4.4.gem]
| Linux x86_64        | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-linux-3.2.0.gem[couchbase-3.4.4-x86_64-linux-3.2.0.gem]
| Linux x86_64        | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-linux-3.1.0.gem[couchbase-3.4.4-x86_64-linux-3.1.0.gem]
| Linux x86_64        | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-linux-3.0.0.gem[couchbase-3.4.4-x86_64-linux-3.0.0.gem]
| Linux x86_64 (musl) | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-linux-musl-3.2.0.gem[couchbase-3.4.4-x86_64-linux-musl-3.2.0.gem]
| Linux x86_64 (musl) | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-linux-musl-3.1.0.gem[couchbase-3.4.4-x86_64-linux-musl-3.1.0.gem]
| Linux x86_64 (musl) | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-linux-musl-3.0.0.gem[couchbase-3.4.4-x86_64-linux-musl-3.0.0.gem]
| macOS 10.15 x84_64  | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-darwin-19-3.2.0.gem[couchbase-3.4.4-x86_64-darwin-19-3.2.0.gem]
| macOS 10.15 x84_64  | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-darwin-19-3.0.0.gem[couchbase-3.4.4-x86_64-darwin-19-3.0.0.gem]
| macOS 11 x84_64     | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-darwin-20-3.2.0.gem[couchbase-3.4.4-x86_64-darwin-20-3.2.0.gem]
| macOS 11 x84_64     | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-darwin-20-3.1.0.gem[couchbase-3.4.4-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64     | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-x86_64-darwin-20-3.0.0.gem[couchbase-3.4.4-x86_64-darwin-20-3.0.0.gem]
| macOS 11 M1         | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.4/couchbase-3.4.4-arm64-darwin-20-3.0.0.gem[couchbase-3.4.4-arm64-darwin-20-3.0.0.gem]
|===



=== Version 3.4.3 (17 May 2023)

[source,bash]
----
gem install couchbase -v 3.4.3
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.4.3/index.html[API Reference]

==== Improvements

* https://issues.couchbase.com/browse/RCBC-420[RCBC-420]:
Implemented support for `RawJsonTranscoder`, `RawBinaryTranscoder`, and `RawStringTranscoder`,
and checking flags when decoding document content (https://github.com/couchbase/couchbase-ruby-client/pull/93[#93]).

* https://issues.couchbase.com/browse/RCBC-427[RCBC-427]:
Add missing query index management options -- `scope_name`, `collection_name`, and `index_name` for `#create_primary` method.
Replaced `ArgumentError` with `InvalidArgument` error when `scope_name` and `collection_name` are used in the CollectionQueryIndexManager
(https://github.com/couchbase/couchbase-ruby-client/pull/92[#92]).

* https://issues.couchbase.com/browse/RCBC-436[RCBC-436]:
To support LDAP authentication, always use PLAIN SASL mechanism with TLS connections
(https://github.com/couchbase/couchbase-ruby-client/pull/103[#103],
https://issues.couchbase.com/browse/CXXCBC-296[CXXCBC-296]).

* Fix the durability level always being set to `none` in the C++ core
(https://github.com/couchbase/couchbase-ruby-client/pull/99[#99]).

* Added constructor for `SearchRowLocation`
(https://github.com/couchbase/couchbase-ruby-client/pull/95[#95]).

* Changed `attr` to `attr_reader`
(https://github.com/couchbase/couchbase-ruby-client/pull/104[#104]).


==== Underlying C++ SDK Core Changes

* https://issues.couchbase.com/browse/CXXCBC-324[CXXCBC-324]:
Port and network name now checked on session restart, improving performance during rebalance
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/401[#401]).

* https://issues.couchbase.com/browse/CXXCBC-323[CXXCBC-323]:
`bootstrap_timeout` and `resolve_timeout` can now be used in the connection string
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/400[#400]).

* https://issues.couchbase.com/browse/CXXCBC-327[CXXCBC-327]:
Bundled Mozilla certificates with the library
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/405[#405],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/408[#408]).
Source: https://curl.se/docs/caextract.html.
Use the `disable_mozilla_ca_certificates` connection string option to disable the bundled certificates.
Use the following script to inspect the certificates' metadata:
+
[source,ruby]
----
Couchbase::BUILD_INFO[:cxx_client].select{|k, _| k =~ /mozilla/}
# =>
# {:mozilla_ca_bundle_date=>"Tue Jan 10 04:12:06 2023 GMT",
#  :mozilla_ca_bundle_embedded=>true,
#  :mozilla_ca_bundle_sha256=>"fb1ecd641d0a02c01bc9036d513cb658bbda62a75e246bedbc01764560a639f0",
#  :mozilla_ca_bundle_size=>137}
----

* Introduced connection string option `dump_configuration` for debugging
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/398[#398]).
It logs cluster configuration at trace level.

==== Download Links

[cols="9,5,19"]
|===
| Platform            | Ruby ABI | File
| Checksums           |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3.sha256sum[couchbase-3.4.3.sha256sum]
| Source Archive      |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3.gem[couchbase-3.4.3.gem]
| Linux x86_64        | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-linux-3.2.0.gem[couchbase-3.4.3-x86_64-linux-3.2.0.gem]
| Linux x86_64        | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-linux-3.1.0.gem[couchbase-3.4.3-x86_64-linux-3.1.0.gem]
| Linux x86_64        | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-linux-3.0.0.gem[couchbase-3.4.3-x86_64-linux-3.0.0.gem]
| Linux x86_64 (musl) | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-linux-musl-3.2.0.gem[couchbase-3.4.3-x86_64-linux-musl-3.2.0.gem]
| Linux x86_64 (musl) | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-linux-musl-3.1.0.gem[couchbase-3.4.3-x86_64-linux-musl-3.1.0.gem]
| Linux x86_64 (musl) | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-linux-musl-3.0.0.gem[couchbase-3.4.3-x86_64-linux-musl-3.0.0.gem]
| macOS 10.15 x84_64  | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-darwin-19-3.2.0.gem[couchbase-3.4.3-x86_64-darwin-19-3.2.0.gem]
| macOS 10.15 x84_64  | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-darwin-19-3.0.0.gem[couchbase-3.4.3-x86_64-darwin-19-3.0.0.gem]
| macOS 11 x84_64     | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-darwin-20-3.2.0.gem[couchbase-3.4.3-x86_64-darwin-20-3.2.0.gem]
| macOS 11 x84_64     | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-darwin-20-3.1.0.gem[couchbase-3.4.3-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64     | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-x86_64-darwin-20-3.0.0.gem[couchbase-3.4.3-x86_64-darwin-20-3.0.0.gem]
| macOS 11 M1         | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.3/couchbase-3.4.3-arm64-darwin-20-3.0.0.gem[couchbase-3.4.3-arm64-darwin-20-3.0.0.gem]
|===



=== Version 3.4.2 (12 April 2023)

[source,bash]
----
gem install couchbase -v 3.4.2
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.4.2/index.html[API Reference]

==== Improvements

* https://issues.couchbase.com/browse/RCBC-419[RCBC-419]:
Accept `Couchbase::Configuration` object on `Couchbase::Cluster.connect`
(https://github.com/couchbase/couchbase-ruby-client/pull/85[#85]).

* https://issues.couchbase.com/browse/RCBC-418[RCBC-418]:
Add durability to append and prepend options
(https://github.com/couchbase/couchbase-ruby-client/pull/88[#88]).

* https://issues.couchbase.com/browse/RCBC-422[RCBC-422]:
Cleanup search options
(https://github.com/couchbase/couchbase-ruby-client/pull/89[#89]).

==== Underlying C++ SDK Core Changes

* https://issues.couchbase.com/browse/CXXCBC-31[CXXCBC-31]:
Allow the use of schemaless connection strings (e.g. `"cb1.example.com,cb2.example.com"`)
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/395[#394]).

* https://issues.couchbase.com/browse/CXXCBC-318[CXXCBC-318]:
Always try TCP if UDP fails in DNS-SRV resolver
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/390[#390]).

==== Download Links

[cols="9,5,19"]
|===
| Platform            | Ruby ABI | File
| Checksums           |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2.sha256sum[couchbase-3.4.2.sha256sum]
| Source Archive      |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2.gem[couchbase-3.4.2.gem]
| Linux x86_64        | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-linux-3.2.0.gem[couchbase-3.4.2-x86_64-linux-3.2.0.gem]
| Linux x86_64        | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-linux-3.1.0.gem[couchbase-3.4.2-x86_64-linux-3.1.0.gem]
| Linux x86_64        | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-linux-3.0.0.gem[couchbase-3.4.2-x86_64-linux-3.0.0.gem]
| Linux x86_64 (musl) | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-linux-musl-3.2.0.gem[couchbase-3.4.2-x86_64-linux-musl-3.2.0.gem]
| Linux x86_64 (musl) | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-linux-musl-3.1.0.gem[couchbase-3.4.2-x86_64-linux-musl-3.1.0.gem]
| Linux x86_64 (musl) | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-linux-musl-3.0.0.gem[couchbase-3.4.2-x86_64-linux-musl-3.0.0.gem]
| macOS 10.15 x84_64  | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-darwin-19-3.2.0.gem[couchbase-3.4.2-x86_64-darwin-19-3.2.0.gem]
| macOS 10.15 x84_64  | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-darwin-19-3.0.0.gem[couchbase-3.4.2-x86_64-darwin-19-3.0.0.gem]
| macOS 11 x84_64     | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-darwin-20-3.2.0.gem[couchbase-3.4.2-x86_64-darwin-20-3.2.0.gem]
| macOS 11 x84_64     | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-darwin-20-3.1.0.gem[couchbase-3.4.2-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64     | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-x86_64-darwin-20-3.0.0.gem[couchbase-3.4.2-x86_64-darwin-20-3.0.0.gem]
| macOS 11 M1         | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.2/couchbase-3.4.2-arm64-darwin-20-3.0.0.gem[couchbase-3.4.2-arm64-darwin-20-3.0.0.gem]
|===


=== Version 3.4.1 (20 March 2023)

[source,bash]
----
gem install couchbase -v 3.4.1
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.4.1/index.html[API Reference]

==== Improvements

* https://issues.couchbase.com/browse/RCBC-396[RCBC-396]:
Query index management is now available on `Collection` class as `Collection#query_indexes`.
`scope_name` and `collection_name` in `QueryIndexManager` are now deprected
(https://github.com/couchbase/couchbase-ruby-client/pull/75[#75]).

==== Underlying C++ SDK Core Changes

* Improved build with OpenSSL on CentOS 7 (https://github.com/couchbaselabs/couchbase-cxx-client/pull/382[#382]).
* https://issues.couchbase.com/browse/CXXCBC-144[CXXCBC-144]:
Search query on collections no longer requires you to pass in the scope name -- it is inferred from the index
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/379[#379]).
* https://issues.couchbase.com/browse/CXXCBC-145[CXXCBC-145]:
Search query request, raw option added
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/380[#380]).

==== Download Links

[cols="9,5,19"]
|===
| Platform            | Ruby ABI | File
| Checksums           |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1.sha256sum[couchbase-3.4.1.sha256sum]
| Source Archive      |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1.gem[couchbase-3.4.1.gem]
| Linux x86_64        | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-linux-3.2.0.gem[couchbase-3.4.1-x86_64-linux-3.2.0.gem]
| Linux x86_64        | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-linux-3.1.0.gem[couchbase-3.4.1-x86_64-linux-3.1.0.gem]
| Linux x86_64        | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-linux-3.0.0.gem[couchbase-3.4.1-x86_64-linux-3.0.0.gem]
| Linux x86_64 (musl) | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-linux-musl-3.2.0.gem[couchbase-3.4.1-x86_64-linux-musl-3.2.0.gem]
| Linux x86_64 (musl) | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-linux-musl-3.1.0.gem[couchbase-3.4.1-x86_64-linux-musl-3.1.0.gem]
| Linux x86_64 (musl) | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-linux-musl-3.0.0.gem[couchbase-3.4.1-x86_64-linux-musl-3.0.0.gem]
| macOS 10.15 x84_64  | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-darwin-19-3.2.0.gem[couchbase-3.4.1-x86_64-darwin-19-3.2.0.gem]
| macOS 10.15 x84_64  | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-darwin-19-3.0.0.gem[couchbase-3.4.1-x86_64-darwin-19-3.0.0.gem]
| macOS 11 x84_64     | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-darwin-20-3.2.0.gem[couchbase-3.4.1-x86_64-darwin-20-3.2.0.gem]
| macOS 11 x84_64     | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-darwin-20-3.1.0.gem[couchbase-3.4.1-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64     | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-x86_64-darwin-20-3.0.0.gem[couchbase-3.4.1-x86_64-darwin-20-3.0.0.gem]
| macOS 11 M1         | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.1/couchbase-3.4.1-arm64-darwin-20-3.0.0.gem[couchbase-3.4.1-arm64-darwin-20-3.0.0.gem]
|===


=== Version 3.4.0 (19 February 2023)

[source,bash]
----
gem install couchbase -v 3.4.0
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.4.0/index.html[API Reference]

==== Improvements

* https://issues.couchbase.com/browse/RCBC-378[RCBC-378]:
Implement change password for `Management::User` class. (https://github.com/couchbase/couchbase-ruby-client/pull/65[#65])
* https://issues.couchbase.com/browse/RCBC-388[RCBC-388]:
Add Configuration Profiles. At the moment one profile is defined `"wan_development"`, and it could be applied using `Options::Cluster#apply_profile`.  (https://github.com/couchbase/couchbase-ruby-client/pull/55[#55])
* https://issues.couchbase.com/browse/RCBC-263[RCBC-263]:
Implement legacy durability. See options `:persist_to` and `:replicate_to` of mutations. (https://github.com/couchbase/couchbase-ruby-client/pull/49[#49])
* https://issues.couchbase.com/browse/RCBC-387[RCBC-387]:
Implement replica reads with `Collection#get_any_replica` and `Couchbase#get_all_replicas` (https://github.com/couchbase/couchbase-ruby-client/pull/48[#48])
* https://issues.couchbase.com/browse/RCBC-375[RCBC-375]:
Implement log forwarding. See documentation of method `Couchbase.set_logger` and classes `Couchbase::Utils::GenericLoggerAdapter`, `Couchbase::Utils::GenericLoggerAdapter` (https://github.com/couchbase/couchbase-ruby-client/pull/45[#45])
* https://issues.couchbase.com/browse/RCBC-371[RCBC-371]:
Return id for `*_multi` results. (https://github.com/couchbase/couchbase-ruby-client/pull/40[#40])
* https://issues.couchbase.com/browse/RCBC-393[RCBC-393]:
Fix type conversion for query metrics. (https://github.com/couchbase/couchbase-ruby-client/pull/62[#62])
* https://issues.couchbase.com/browse/RCBC-398[RCBC-398]:
Add `ClusterRegistry` to allow custom connection string handlers. (https://github.com/couchbase/couchbase-ruby-client/pull/68[#68])
* https://issues.couchbase.com/browse/RCBC-366[RCBC-366]:
Allow to override default timeouts through `Options::Cluster` (https://github.com/couchbase/couchbase-ruby-client/pull/37[#37])
* https://issues.couchbase.com/browse/RCBC-399[RCBC-399]:
Add default options objects as class constants. (https://github.com/couchbase/couchbase-ruby-client/pull/69[#69])

==== Underlying C++ SDK Core

==== Notable Changes in C++ SDK 1.0.0-dp.4

* https://issues.couchbase.com/browse/CXXCBC-275[CXXCBC-275]:
Update implementation query context fields passed to the server. In future versions of the server versions it will become mandatory to specify context of the statement (bucket, scope and collection).
This change ensures that both future and current server releases supported transparently.
* https://issues.couchbase.com/browse/CXXCBC-296[CXXCBC-296]:
Force PLAIN SASL auth if TLS enabled. Using SCRAM SASL mechanisms over TLS protocol is unnecesary complication, that slows down initial connection bootstrap and potentially limits server ability to improve security and evolve credentials management.
* https://issues.couchbase.com/browse/CXXCBC-295[CXXCBC-295]:
The `get with projections` opration should not fail if one of the the paths is missing in the document, because the semantics is "get the partial document" and not "get individual fields" like in `lookup_in` operation.
* https://issues.couchbase.com/browse/CXXCBC-294[CXXCBC-294]:
In the Public API, if `get` operation requested to return expiry time, zero expiry should not be interpreted as absolute expiry timestamp (zero seconds from UNIX epoch), but rather as absense of the expiry.
* https://issues.couchbase.com/browse/CXXCBC-291[CXXCBC-291]:
Allow to disable mutation tokens for Key/Value mutations (use `enable_mutation_tokens` in connection string).
* Resource management and performance improvements:
** Fix tracer and meter ref-counting (https://github.com/couchbaselabs/couchbase-cxx-client/pull/370[#370])
** Replace `minstd_rand` with `mt19937_64`, as it gives less collisions (https://github.com/couchbaselabs/couchbase-cxx-client/pull/356[#356])
** https://issues.couchbase.com/browse/CXXCBC-285[CXXCBC-285]:
Write to sockets from IO threads, to eliminate potential race conditions. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/348[#348])
** Eliminate looping transform in `mcbp_parser::next` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/347[#347])
** https://issues.couchbase.com/browse/CXXCBC-295[CXXCBC-205]:
Use thread-local UUID generator (https://github.com/couchbaselabs/couchbase-cxx-client/pull/340[#340])
** https://issues.couchbase.com/browse/CXXCBC-293[CXXCBC-293]:
Performance improvements:
*** Speed up UUID serialization to string (https://github.com/couchbaselabs/couchbase-cxx-client/pull/346[#346])
*** Don't allow to copy `mcbp_message` objects (https://github.com/couchbaselabs/couchbase-cxx-client/pull/345[#345])
*** Avoid extra allocation and initialization (https://github.com/couchbaselabs/couchbase-cxx-client/pull/344[#344])
* Build system fixes:
** Fix build with gcc-13 (https://github.com/couchbaselabs/couchbase-cxx-client/pull/372[#372])
** Fix gcc 12 issue (https://github.com/couchbaselabs/couchbase-cxx-client/pull/367[#367])
* Enhancements:
** Include bucketless KV service when ping is requested. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/339[#339])
** Include OS name in SDK identifier (https://github.com/couchbaselabs/couchbase-cxx-client/pull/349[#349])

==== Notable changes in C++ SDK 1.0.0-dp.3

* https://issues.couchbase.com/CXXCBC-276[CXXCBC-276]:
Use interval from the options for config poll, which previous was hard-coded to 2.5 seconds. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/336[#336])

==== Notable changes in C++ SDK 1.0.0-dp.2

* https://issues.couchbase.com/browse/CXXCBC-242[CXXCBC-242]:
Drain waiting commands list on MCBP session close (https://github.com/couchbaselabs/couchbase-cxx-client/pull/321[#321])
* https://issues.couchbase.com/browse/CXXCBC-271[CXXCBC-271]:
Fix `get_all_replicas` behaviour: do not propagate error if result set is not empty, while the last response has failed. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/322[#322])

==== Notable changes in C++ SDK 1.0.0-dp.1

* https://issues.couchbase.com/browse/CXXCBC-142[CXXCBC-142]:
Update SRV resolution for Windows (https://github.com/couchbaselabs/couchbase-cxx-client/pull/303[#303])
* https://issues.couchbase.com/browse/CXXCBC-172[CXXCBC-172]:
Refresh DNS SRV when cluster uncontactable (https://github.com/couchbaselabs/couchbase-cxx-client/pull/275[#275], https://github.com/couchbaselabs/couchbase-cxx-client/pull/290[#290])
* https://issues.couchbase.com/browse/CXXCBC-234[CXXCBC-234]:
Error message for bucket hibernation and update error message for authentication_failure. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/290[#280], https://github.com/couchbaselabs/couchbase-cxx-client/pull/285[#285])
* https://issues.couchbase.com/browse/CXXCBC-235[CXXCBC-235]:
Load system CAs when the trust certificate is not provided and do not fail if trust certificate is not specified (https://github.com/couchbaselabs/couchbase-cxx-client/pull/283[#283], https://github.com/couchbaselabs/couchbase-cxx-client/pull/281[#281])
* https://issues.couchbase.com/browse/CXXCBC-245[CXXCBC-245]:
Fix encoding of durability frame (https://github.com/couchbaselabs/couchbase-cxx-client/pull/277[#277])
* https://issues.couchbase.com/browse/CXXCBC-246[CXXCBC-246]:
Convert `not_stored` code to `document_exists` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/278[#278])
* https://issues.couchbase.com/browse/CXXCBC-251[CXXCBC-251]:
Fix snappy decompression for `get_replica` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/296[#296])
* https://issues.couchbase.com/browse/CXXCBC-253[CXXCBC-253]:
`query_options` not setting `scope_qualifier` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/300[#300])
* https://issues.couchbase.com/browse/SDKQE-2761[SDKQE-2761]:
Fix failures in serverless mode (https://github.com/couchbaselabs/couchbase-cxx-client/pull/274[#274])
* Don't log expected warnings in DNS resolver (https://github.com/couchbaselabs/couchbase-cxx-client/pull/294[#294])

===== Resource management and performance fixes

* https://issues.couchbase.com/browse/CXXCBC-225[CXXCBC-225]:
Don't throw exceptions when socket options cannot be set (https://github.com/couchbaselabs/couchbase-cxx-client/pull/270[#270])

===== Build system fixes

* Move away from `reinterpret_pointer_cast<>` for MacOS build issue (https://github.com/couchbaselabs/couchbase-cxx-client/pull/288[#288])
* Improve OpenSSL detection on Windows (https://github.com/couchbaselabs/couchbase-cxx-client/pull/272[#272])

==== Notable changes in C++ SDK 1.0.0-beta.3

* https://issues.couchbase.com/browse/CXXCBC-221[CXXCBC-221]:
Support for configuration profiles (https://github.com/couchbaselabs/couchbase-cxx-client/pull/268[#268])
* https://issues.couchbase.com/browse/CXXCBC-218[CXXCBC-218]:
allow to check if subdoc result field has value (https://github.com/couchbaselabs/couchbase-cxx-client/pull/263[#263])
* https://issues.couchbase.com/browse/CXXCBC-199[CXXCBC-199]:
Always set `kv_collection_outdated` retry reason on unknown collection error (https://github.com/couchbaselabs/couchbase-cxx-client/pull/223[#223])
* https://issues.couchbase.com/browse/CXXCBC-203[CXXCBC-203]:
disable clustermap nofication by default (https://github.com/couchbaselabs/couchbase-cxx-client/pull/233[#233])
* https://issues.couchbase.com/browse/CXXCBC-159[CXXCBC-159]:
Increment/decrement should not have `preserve_expiry` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/201[#201])
* https://issues.couchbase.com/browse/CXXCBC-55[CXXCBC-55]:
External Tracing and Metrics support with OpenTelemetry support (https://github.com/couchbaselabs/couchbase-cxx-client/pull/228[#228], https://github.com/couchbaselabs/couchbase-cxx-client/pull/231[#231])
* https://issues.couchbase.com/browse/CXXCBC-54[CXXCBC-54]:
Add log forwarding (https://github.com/couchbaselabs/couchbase-cxx-client/pull/206[#206])

===== Bug fixes

* https://issues.couchbase.com/browse/CXXCBC-134[CXXCBC-134]:
Close http_session before conecting to next endpoint (https://github.com/couchbaselabs/couchbase-cxx-client/pull/213[#213])
* https://issues.couchbase.com/browse/CXXCBC-179[CXXCBC-179]:
fix parsing responses with chunked meta trailer (https://github.com/couchbaselabs/couchbase-cxx-client/pull/191[#191])
* https://issues.couchbase.com/browse/CXXCBC-170[CXXCBC-170]:
add extra check for missing CA for TLS connections (https://github.com/couchbaselabs/couchbase-cxx-client/pull/197[#197])
* https://issues.couchbase.com/browse/CXXCBC-182[CXXCBC-182]:
add extra check for keywords in query index fields (https://github.com/couchbaselabs/couchbase-cxx-client/pull/196[#196])
* https://issues.couchbase.com/browse/CXXCBC-173[CXXCBC-173]:
complete streaming lexer even if pointer didn't match (https://github.com/couchbaselabs/couchbase-cxx-client/pull/195[#195])
* https://issues.couchbase.com/browse/CXXCBC-212[CXXCBC-212]:
reprepare and retry query on 4040, 4050 and 4070 (https://github.com/couchbaselabs/couchbase-cxx-client/pull/257[#257])
* https://issues.couchbase.com/browse/CXXCBC-174[CXXCBC-174]:
reduce scope of the http request lock (https://github.com/couchbaselabs/couchbase-cxx-client/pull/259[#259])
* https://issues.couchbase.com/browse/CXXCBC-176[CXXCBC-176]:
ignore 'is_primary' for named primary indexes when dropping (https://github.com/couchbaselabs/couchbase-cxx-client/pull/202[#202])
* Return subdocument error context from future-based subdoc methods (https://github.com/couchbaselabs/couchbase-cxx-client/pull/258[#258])

==== Download Links

[cols="9,5,19"]
|===
| Platform            | Ruby ABI | File
| Checksums           |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0.sha256sum[couchbase-3.4.0.sha256sum]
| Source Archive      |          | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0.gem[couchbase-3.4.0.gem]
| Linux x86_64        | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-linux-3.2.0.gem[couchbase-3.4.0-x86_64-linux-3.2.0.gem]
| Linux x86_64        | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-linux-3.1.0.gem[couchbase-3.4.0-x86_64-linux-3.1.0.gem]
| Linux x86_64        | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-linux-3.0.0.gem[couchbase-3.4.0-x86_64-linux-3.0.0.gem]
| Linux x86_64 (musl) | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-linux-musl-3.2.0.gem[couchbase-3.4.0-x86_64-linux-musl-3.2.0.gem]
| Linux x86_64 (musl) | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-linux-musl-3.1.0.gem[couchbase-3.4.0-x86_64-linux-musl-3.1.0.gem]
| Linux x86_64 (musl) | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-linux-musl-3.0.0.gem[couchbase-3.4.0-x86_64-linux-musl-3.0.0.gem]
| macOS 10.15 x84_64  | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-darwin-19-3.2.0.gem[couchbase-3.4.0-x86_64-darwin-19-3.2.0.gem]
| macOS 10.15 x84_64  | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-darwin-19-3.0.0.gem[couchbase-3.4.0-x86_64-darwin-19-3.0.0.gem]
| macOS 11 x84_64     | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-darwin-20-3.2.0.gem[couchbase-3.4.0-x86_64-darwin-20-3.2.0.gem]
| macOS 11 x84_64     | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-darwin-20-3.1.0.gem[couchbase-3.4.0-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64     | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-x86_64-darwin-20-3.0.0.gem[couchbase-3.4.0-x86_64-darwin-20-3.0.0.gem]
| macOS 11 M1         | 3.2.0    | https://packages.couchbase.com/clients/ruby/sdk-3.4.0/couchbase-3.4.0-arm64-darwin-20-3.0.0.gem[couchbase-3.4.0-arm64-darwin-20-3.0.0.gem]
|===



== Ruby SDK 3.3 Releases

=== Version 3.3.0 (5 May 2022)

This is the first GA release of the 3.3 series.

[source,bash]
----
gem install couchbase -v 3.3.0
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.3.0/index.html[API Reference]

Improvements:

* https://issues.couchbase.com/browse/RCBC-338[RCBC-338]:
  Added new options for the search API.
  You can now add the `operator` and `include_locations` properties to all search queries.

* https://issues.couchbase.com/browse/RCBC-358[RCBC-358], https://issues.couchbase.com/browse/RCBC-346[RCBC-346]:
  Added new options for the bucket API.
  The SDK now allows you to configure the custom conflict resolution storage backend for new buckets.

* https://issues.couchbase.com/browse/RCBC-345[RCBC-345]:
  We now support preserving expiry for the query API.

* https://issues.couchbase.com/browse/RCBC-343[RCBC-343]:
  SSL peer is now verified by default.

* Added support for Ruby 3.1.

* Dropped support for Ruby 2.5 and 2.6.

Fixes:

* https://issues.couchbase.com/browse/RCBC-358[RCBC-358]:
  The SDK now initializes search locations only if they are returned by the server.


[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0.sha256sum[couchbase-3.3.0.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0.gem[couchbase-3.3.0.gem]
| Linux x86_64       | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-linux-3.1.0.gem[couchbase-3.3.0-x86_64-linux-3.1.0.gem]
| Linux x86_64       | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-linux-3.0.0.gem[couchbase-3.3.0-x86_64-linux-3.0.0.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-linux-2.7.0.gem[couchbase-3.3.0-x86_64-linux-2.7.0.gem]
| macOS 10.15 x84_64 | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-darwin-19-3.1.0.gem[couchbase-3.3.0-x86_64-darwin-19-3.1.0.gem]
| macOS 10.15 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-darwin-19-3.0.0.gem[couchbase-3.3.0-x86_64-darwin-19-3.0.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-darwin-19-2.7.0.gem[couchbase-3.3.0-x86_64-darwin-19-2.7.0.gem]
| macOS 11 x84_64 | 3.1.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-darwin-20-3.1.0.gem[couchbase-3.3.0-x86_64-darwin-20-3.1.0.gem]
| macOS 11 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-darwin-20-3.0.0.gem[couchbase-3.3.0-x86_64-darwin-20-3.0.0.gem]
| macOS 11 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.3.0/couchbase-3.3.0-x86_64-darwin-20-2.7.0.gem[couchbase-3.3.0-x86_64-darwin-20-2.7.0.gem]
|===



== Ruby SDK 3.2 Releases

=== Version 3.2.0 (4 August 2021)

This is the first GA release of the 3.2 series.

[source,bash]
----
gem install couchbase -v 3.2.0
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.2.0/index.html[API Reference]

* https://issues.couchbase.com/browse/RCBC-301[RCBC-301]:
  Implemented metrics.
  This feature is enabled by default; it can be disabled in the connection string with `enable_metrics=false`, or programmatically:
+
[source,ruby]
----
options = Cluster::ClusterOptions.new
options.enable_metrics = false
----
+
Extra options:
+
[source,ruby]
----
options = Cluster::ClusterOptions.new
options.metrics_emit_interval = 60_000 # in milliseconds, default 10 minutes
----

* https://issues.couchbase.com/browse/RCBC-234[RCBC-234]:
 Implemented tracing.
 This feature is enabled by default; it can be disabled in the connection string with `enable_tracing=false`, or programmatically:
+
[source,ruby]
----
options = Cluster::ClusterOptions.new
options.enable_tracing = false
----
+
Extra options:
+
[source,ruby]
----
options = Cluster::ClusterOptions.new
options.orphaned_emit_interval = 600_000 # in milliseconds
options.orphaned_sample_size = 64

options.threshold_emit_interval = 600_00 # in milliseconds
options.threshold_sample_size = 64
options.key_value_threshold = 500 # in milliseconds
options.query_threshold = 1_000 # in milliseconds
options.view_threshold = 1_000 # in milliseconds
options.search_threshold = 1_000 # in milliseconds
options.analytics_threshold = 1_000 # in milliseconds
options.management_threshold = 1_000 # in milliseconds
----

* https://issues.couchbase.com/browse/RCBC-318[RCBC-318]:
  Parse and use `revEpoch` field in configuration for improved bucket configuration handling.

* https://issues.couchbase.com/browse/RCBC-324[RCBC-324]:
  Query error code 13014 is now mapped to an `AuthenticationFailure` exception.

* https://issues.couchbase.com/browse/RCBC-227[RCBC-227]:
  Remote links for analytics can now be managed from the SDK,
  enabling  connection to an external dataset such as an AWS S3 bucket.

* https://issues.couchbase.com/browse/RCBC-283[RCBC-283]:
  Added Collections support for Search queries.

* https://issues.couchbase.com/browse/RCBC-311[RCBC-311]:
  Fixed scope qualifer encoding for analtyics to work with latest decoding.

* Dropped support of Ruby 2.5.

* Many smaller fixes and improvements.

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0.sha256sum[couchbase-3.2.0.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0.gem[couchbase-3.2.0.gem]
| Linux x86_64       | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-linux-3.0.0.gem[couchbase-3.2.0-x86_64-linux-3.0.0.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-linux-2.7.0.gem[couchbase-3.2.0-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-linux-2.6.0.gem[couchbase-3.2.0-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-linux-2.5.0.gem[couchbase-3.2.0-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-19-3.0.0.gem[couchbase-3.2.0-x86_64-darwin-19-3.0.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-19-2.7.0.gem[couchbase-3.2.0-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-19-2.6.0.gem[couchbase-3.2.0-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-19-2.5.0.gem[couchbase-3.2.0-x86_64-darwin-19-2.5.0.gem]
| macOS 11 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-20-3.0.0.gem[couchbase-3.2.0-x86_64-darwin-20-3.0.0.gem]
| macOS 11 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-20-2.7.0.gem[couchbase-3.2.0-x86_64-darwin-20-2.7.0.gem]
| macOS 11 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-20-2.6.0.gem[couchbase-3.2.0-x86_64-darwin-20-2.6.0.gem]
| macOS 11 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-x86_64-darwin-20-2.5.0.gem[couchbase-3.2.0-x86_64-darwin-20-2.5.0.gem]
| macOS 11 Universal | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.2.0/couchbase-3.2.0-universal-darwin-20.gem[couchbase-3.2.0-universal-darwin-20.gem]
|===



== Ruby SDK 3.1 Releases

=== Version 3.1.1 (8 April 2021)

This is the second GA release of 3.1 series.

[source,bash]
----
gem install couchbase -v 3.1.1
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.1.1/index.html[API Reference]

* https://issues.couchbase.com/browse/RCBC-309[RCBC-309]:
  Allow subdocument remove operation with empty path.

* https://issues.couchbase.com/browse/RCBC-316[RCBC-316]:
  Fix exceptions for collections manager.

* https://issues.couchbase.com/browse/RCBC-315[RCBC-315]:
  Raise `CasMismatch` exception only when query returns code `12009` with `"CAS mismatch"` in message.

* https://issues.couchbase.com/browse/RCBC-298[RCBC-298]:
  Support preserving expiration for mutations. `Collection#replace`, `Collection#upsert`, and `Collection#mutate_in` methods now accept new boolean option `preserve_expiry` which determines whether the server will update expiration for existing documents (`false` by default).
+
In the following example, the server will not reset expiration if the document already exists, and only use `100` seconds if the document has to be created.
+
[source,ruby]
----
collection.upsert(doc_id, {answer: 43},
    Options::Upsert(expiry: 100, preserve_expiry: true))
----

* https://issues.couchbase.com/browse/RCBC-317[RCBC-317]:
  Allow to disable snappy compression with `enable_compression=false` in connection string.

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1.sha256sum[couchbase-3.1.1.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1.gem[couchbase-3.1.1.gem]
| Linux x86_64       | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-linux-3.0.0.gem[couchbase-3.1.1-x86_64-linux-3.0.0.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-linux-2.7.0.gem[couchbase-3.1.1-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-linux-2.6.0.gem[couchbase-3.1.1-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-linux-2.5.0.gem[couchbase-3.1.1-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-19-3.0.0.gem[couchbase-3.1.1-x86_64-darwin-19-3.0.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-19-2.7.0.gem[couchbase-3.1.1-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-19-2.6.0.gem[couchbase-3.1.1-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-19-2.5.0.gem[couchbase-3.1.1-x86_64-darwin-19-2.5.0.gem]
| macOS 11 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-20-3.0.0.gem[couchbase-3.1.1-x86_64-darwin-20-3.0.0.gem]
| macOS 11 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-20-2.7.0.gem[couchbase-3.1.1-x86_64-darwin-20-2.7.0.gem]
| macOS 11 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-20-2.6.0.gem[couchbase-3.1.1-x86_64-darwin-20-2.6.0.gem]
| macOS 11 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-20-2.5.0.gem[couchbase-3.1.1-x86_64-darwin-20-2.5.0.gem]
| macOS 11 Universal | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.1/couchbase-3.1.1-x86_64-darwin-20.gem[couchbase-3.1.1-x86_64-darwin-20.gem]
|===


=== Version 3.1.0 (24 March 2021)

This is the first GA release of 3.1 series.

[source,bash]
----
gem install couchbase -v 3.1.0
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.1.0/index.html[API Reference]

* https://issues.couchbase.com/browse/RCBC-314[RCBC-314]:
  Fixed class resolution for Analytics at scope level.

* https://issues.couchbase.com/browse/RCBC-276[RCBC-276]:
  Marked `create_as_deleted` of subdocument API as private.

* https://issues.couchbase.com/browse/RCBC-287[RCBC-287]:
  Updated URLs of endpoints for Collections management API.

* https://issues.couchbase.com/browse/RCBC-303[RCBC-303]:
  Deprecated `CollectionManager#get_scope`; instead the application should use `CollectionManager#get_scopes` and iterate/filter the results.

* https://issues.couchbase.com/browse/RCBC-313[RCBC-313]:
  Send collection name as value on network level for `0xbb` (`GET_COLLECTION_ID`) command.

* https://issues.couchbase.com/browse/RCBC-302[RCBC-302]:
  Allow to disable configuration push from server (using `enable_clustermap_notification=false` in the connection string).

* https://issues.couchbase.com/browse/RCBC-307[RCBC-307]:
  Allow to disable unordered execution of commands (using `enable_unordered_execution=false` in the connection string).

* The library does not keep GVL lock durng IO anymore.
It releases lock when scheduling a command, and acquires it back once the command is completed.
This change allows runtime to use fibers or threads, and do something useful while the operation is in progress.

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0.sha256sum[couchbase-3.1.0.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0.gem[couchbase-3.1.0.gem]
| Linux x86_64       | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-linux-3.0.0.gem[couchbase-3.1.0-x86_64-linux-3.0.0.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-linux-2.7.0.gem[couchbase-3.1.0-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-linux-2.6.0.gem[couchbase-3.1.0-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-linux-2.5.0.gem[couchbase-3.1.0-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-19-3.0.0.gem[couchbase-3.1.0-x86_64-darwin-19-3.0.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-19-2.7.0.gem[couchbase-3.1.0-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-19-2.6.0.gem[couchbase-3.1.0-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-19-2.5.0.gem[couchbase-3.1.0-x86_64-darwin-19-2.5.0.gem]
| macOS 11 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-20-3.0.0.gem[couchbase-3.1.0-x86_64-darwin-20-3.0.0.gem]
| macOS 11 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-20-2.7.0.gem[couchbase-3.1.0-x86_64-darwin-20-2.7.0.gem]
| macOS 11 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-20-2.6.0.gem[couchbase-3.1.0-x86_64-darwin-20-2.6.0.gem]
| macOS 11 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.1.0/couchbase-3.1.0-x86_64-darwin-20-2.5.0.gem[couchbase-3.1.0-x86_64-darwin-20-2.5.0.gem]
|===



== Ruby SDK 3.0 Releases

=== Version 3.0.3 (3 February 2021)

[source,bash]
----
gem install couchbase -v 3.0.3
----

This is the fourth GA release of 3.0 series.

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.3/index.html[API Reference]

* https://issues.couchbase.com/browse/RCBC-226[RCBC-226]:
Add minimal durability setting in bucket manager.

* https://issues.couchbase.com/browse/RCBC-238[RCBC-238]:
Refactored expiration (TTL) options:

   - It accepts `Time` instance in addition to `Duration` (`#in_seconds`);
   - When `Integer` is passed, it implicitly converts to epoch time to resolve disambiguation.

* https://issues.couchbase.com/browse/RCBC-291[RCBC-291]:
Implementation of `ActiveSupport::Cache::Store` interface.
To enable it, put the following lines into application configuration section:

[source,ruby]
----
config.cache_store = :couchbase_store, {
  connection_string: "couchbase://localhost",
  username: "app_cache_user",
  password: "s3cret",
  bucket: "app_cache"
}
----

* https://issues.couchbase.com/browse/RCBC-292[RCBC-292]:
Swap bytes in CAS for compatiblity.
Now the value of CAS matches the representation in other services (e.g. Query).

* https://issues.couchbase.com/browse/RCBC-300[RCBC-300]:
Allow the enforcement of PLAIN SASL mechanism.
This is necessary when LDAP authentication is enabled, but the SDK does not use client certification to authenticate.

* https://issues.couchbase.com/browse/RCBC-237[RCBC-237]:
Added collections support for analytics.
`Scope#analytics_query` automatically sets scope qualifier.
Also, it is now possible to provide custom qualifier in the options.

* Status of single operation now accessible on result object of `get_multi`, `upsert_multi`, and `remove_multi` operations.

* Error context objects now accessible on exceptions (via `#context` method).

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3.sha256sum[couchbase-3.0.3.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3.gem[couchbase-3.0.3.gem]
| Linux x86_64       | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-linux-3.0.0.gem[couchbase-3.0.3-x86_64-linux-3.0.0.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-linux-2.7.0.gem[couchbase-3.0.3-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-linux-2.6.0.gem[couchbase-3.0.3-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-linux-2.5.0.gem[couchbase-3.0.3-x86_64-linux-2.5.0.gem]
| macOS 11 Universal | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-universal-darwin-20-2.6.0.gem[couchbase-3.0.3-universal-darwin-20-2.6.0.gem]
| macOS 10.15 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-19-3.0.0.gem[couchbase-3.0.3-x86_64-darwin-19-3.0.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-19-2.7.0.gem[couchbase-3.0.3-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-19-2.6.0.gem[couchbase-3.0.3-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-19-2.5.0.gem[couchbase-3.0.3-x86_64-darwin-19-2.5.0.gem]
| macOS 10.13 x84_64 | 3.0.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-17-3.0.0.gem[couchbase-3.0.3-x86_64-darwin-17-3.0.0.gem]
| macOS 10.13 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-17-2.7.0.gem[couchbase-3.0.3-x86_64-darwin-17-2.7.0.gem]
| macOS 10.13 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-17-2.6.0.gem[couchbase-3.0.3-x86_64-darwin-17-2.6.0.gem]
| macOS 10.13 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.3/couchbase-3.0.3-x86_64-darwin-17-2.5.0.gem[couchbase-3.0.3-x86_64-darwin-17-2.5.0.gem]
|===

=== Version 3.0.2 (3 November 2020)

This is the third GA release of 3.0 series.

[source,bash]
----
gem install couchbase -v 3.0.2
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.2/index.html[API Reference]

* https://issues.couchbase.com/browse/RCBC-281[RCBC-281]:
  Implemented batching API for several data operations.
  (Read docs for
  https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.2/Couchbase/Collection.html#get_multi-instance_method[Collection#get_multi],
  https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.2/Couchbase/Collection.html#upsert_multi-instance_method[Collection#upsert_multi],
  and https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.2/Couchbase/Collection.html#remove_multi-instance_method[Collection#remove_multi]).

* https://issues.couchbase.com/browse/RCBC-223[RCBC-223], https://issues.couchbase.com/browse/RCBC-253[RCBC-253]:
  Implemented ping and diagnostics APIs.

* https://issues.couchbase.com/browse/RCBC-278[RCBC-278]:
  Exposed getter and setter for log level, for example, `Couchbase.log_level = :trace` will switch logger to maximum verbosity.
  (details in https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.2/Couchbase.html#log_level=-class_method[Couchbase] module documentation).

* https://issues.couchbase.com/browse/RCBC-277[RCBC-277]:
  Implemented append/prepend for binary collection
  (more in https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.2/Couchbase/BinaryCollection.html[BinaryCollection] documentation).

* https://issues.couchbase.com/browse/RCBC-276[RCBC-276]:
  Support for `create_as_deleted` option for `Collection#mutate_in` to create document in tombstone state.

* Build, test, and documentation improvements.

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2.sha256sum[couchbase-3.0.2.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2.gem[couchbase-3.0.2.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-linux-2.7.0.gem[couchbase-3.0.2-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-linux-2.6.0.gem[couchbase-3.0.2-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-linux-2.5.0.gem[couchbase-3.0.2-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-darwin-19-2.7.0.gem[couchbase-3.0.2-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-darwin-19-2.6.0.gem[couchbase-3.0.2-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-darwin-19-2.5.0.gem[couchbase-3.0.2-x86_64-darwin-19-2.5.0.gem]
| macOS 10.13 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-darwin-17-2.7.0.gem[couchbase-3.0.2-x86_64-darwin-17-2.7.0.gem]
| macOS 10.13 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-darwin-17-2.6.0.gem[couchbase-3.0.2-x86_64-darwin-17-2.6.0.gem]
| macOS 10.13 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-darwin-17-2.5.0.gem[couchbase-3.0.2-x86_64-darwin-17-2.5.0.gem]
// Hidden. Binary build for the Ruby 2.2.0 on Ubuntu 16.04, that has reached EOL
// | Ubuntu 16.04  | 2.2.0 | https://packages.couchbase.com/clients/ruby/sdk-3.0.2/couchbase-3.0.2-x86_64-linux-2.2.0.gem[couchbase-3.0.2-x86_64-linux-2.2.0.gem]
|===


=== Version 3.0.1 (5 October 2020)

This is the second GA release.

[source,bash]
----
gem install couchbase -v 3.0.1
----

* https://issues.couchbase.com/browse/RCBC-219[RCBC-219], https://issues.couchbase.com/browse/RCBC-252[RCBC-252]:
  Implemented diagnostics API.

* https://issues.couchbase.com/browse/RCBC-272[RCBC-272]:
  Allow disabling of scoring in Full-Text Search results.

* https://issues.couchbase.com/browse/RCBC-229[RCBC-229]:
  Geopolygon Search support.

* https://issues.couchbase.com/browse/RCBC-271[RCBC-271]:
  Enhanced user management for collections.

* https://issues.couchbase.com/browse/RCBC-230[RCBC-230]:
  Added query option for flex index.

* https://issues.couchbase.com/browse/RCBC-233[RCBC-233]:
  Updated eviction policy types (now it covers ephemeral buckets).

* https://issues.couchbase.com/browse/RCBC-274[RCBC-274]:
  Skip non-kv nodes when switching networks (fixes warnings in Cloud environment).

* https://issues.couchbase.com/browse/RCBC-266[RCBC-266]:
  Deprecated `GetResult.expiry`.

* Fixed Query prepared statements cache for older servers.

* Build and test system improvements.

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.1/index.html[API Reference]

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1.sha256sum[couchbase-3.0.1.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1.gem[couchbase-3.0.1.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-linux-2.7.0.gem[couchbase-3.0.1-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-linux-2.6.0.gem[couchbase-3.0.1-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-linux-2.5.0.gem[couchbase-3.0.1-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-darwin-19-2.7.0.gem[couchbase-3.0.1-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-darwin-19-2.6.0.gem[couchbase-3.0.1-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-darwin-19-2.5.0.gem[couchbase-3.0.1-x86_64-darwin-19-2.5.0.gem]
| macOS 10.13 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-darwin-17-2.7.0.gem[couchbase-3.0.1-x86_64-darwin-17-2.7.0.gem]
| macOS 10.13 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-darwin-17-2.6.0.gem[couchbase-3.0.1-x86_64-darwin-17-2.6.0.gem]
| macOS 10.13 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-darwin-17-2.5.0.gem[couchbase-3.0.1-x86_64-darwin-17-2.5.0.gem]
// Hidden. Binary build for the Ruby 2.2.0 on Ubuntu 16.04, that has reached EOL
// | Ubuntu 16.04  | 2.2.0 | https://packages.couchbase.com/clients/ruby/sdk-3.0.1/couchbase-3.0.1-x86_64-linux-2.2.0.gem[couchbase-3.0.1-x86_64-linux-2.2.0.gem]
|===


=== Version 3.0.0 (8 September 2020)

This is the first GA release.

[source,bash]
----
gem install couchbase -v 3.0.0
----

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.0/index.html[API Reference]

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0.sha256sum[couchbase-3.0.0.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0.gem[couchbase-3.0.0.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-linux-2.7.0.gem[couchbase-3.0.0-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-linux-2.6.0.gem[couchbase-3.0.0-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-linux-2.5.0.gem[couchbase-3.0.0-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-darwin-19-2.7.0.gem[couchbase-3.0.0-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-darwin-19-2.6.0.gem[couchbase-3.0.0-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-darwin-19-2.5.0.gem[couchbase-3.0.0-x86_64-darwin-19-2.5.0.gem]
| macOS 10.13 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-darwin-17-2.7.0.gem[couchbase-3.0.0-x86_64-darwin-17-2.7.0.gem]
| macOS 10.13 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-darwin-17-2.6.0.gem[couchbase-3.0.0-x86_64-darwin-17-2.6.0.gem]
| macOS 10.13 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-darwin-17-2.5.0.gem[couchbase-3.0.0-x86_64-darwin-17-2.5.0.gem]
// Hidden. Binary build for the Ruby 2.2.0 on Ubuntu 16.04, that has reached EOL
// | Ubuntu 16.04  | 2.2.0 | https://packages.couchbase.com/clients/ruby/sdk-3.0.0/couchbase-3.0.0-x86_64-linux-2.2.0.gem[couchbase-3.0.0-x86_64-linux-2.2.0.gem]
|===


=== Version 3.0.0.beta.1 (7 August 2020)

This is the first beta release.

https://docs.couchbase.com/sdk-api/couchbase-ruby-client-3.0.0.beta.1/index.html[API Reference]

[cols="9,5,19"]
|===
| Platform           | Ruby ABI | File
| Checksums          |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1.sha256sum[couchbase-3.0.0.beta.1.sha256sum]
| Source Archive     |          | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1.gem[couchbase-3.0.0.beta.1.gem]
| Linux x86_64       | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-linux-2.7.0.gem[couchbase-3.0.0.beta.1-x86_64-linux-2.7.0.gem]
| Linux x86_64       | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-linux-2.6.0.gem[couchbase-3.0.0.beta.1-x86_64-linux-2.6.0.gem]
| Linux x86_64       | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-linux-2.5.0.gem[couchbase-3.0.0.beta.1-x86_64-linux-2.5.0.gem]
| macOS 10.15 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-darwin-19-2.7.0.gem[couchbase-3.0.0.beta.1-x86_64-darwin-19-2.7.0.gem]
| macOS 10.15 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-darwin-19-2.6.0.gem[couchbase-3.0.0.beta.1-x86_64-darwin-19-2.6.0.gem]
| macOS 10.15 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-darwin-19-2.5.0.gem[couchbase-3.0.0.beta.1-x86_64-darwin-19-2.5.0.gem]
| macOS 10.13 x84_64 | 2.7.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-darwin-17-2.7.0.gem[couchbase-3.0.0.beta.1-x86_64-darwin-17-2.7.0.gem]
| macOS 10.13 x84_64 | 2.6.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-darwin-17-2.6.0.gem[couchbase-3.0.0.beta.1-x86_64-darwin-17-2.6.0.gem]
| macOS 10.13 x84_64 | 2.5.0    | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-darwin-17-2.5.0.gem[couchbase-3.0.0.beta.1-x86_64-darwin-17-2.5.0.gem]
// Hidden. Binary build for the Ruby 2.2.0 on Ubuntu 16.04, that has reached EOL
// | Ubuntu 16.04  | 2.2.0 | https://packages.couchbase.com/clients/ruby/sdk-3.0.0.beta.1/couchbase-3.0.0.beta.1-x86_64-linux-2.2.0.gem[couchbase-3.0.0.beta.1-x86_64-linux-2.2.0.gem]
|===


== Older Releases

Although https://www.couchbase.com/support-policy/enterprise-software[no longer supported], documentation for older releases continues to be available in our https://docs-archive.couchbase.com/home/index.html[docs archive].

// end::all[]
